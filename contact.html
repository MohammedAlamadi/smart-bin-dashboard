<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analytics & AI Recommendations - Smart Waste</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/phosphor-icons"></script>

  <!-- Vega / Vega-Lite / Vega-Embed for charts -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: #050815;
      color: #f9fafb;
      min-height: 100vh;
    }

    /* Navbar (same as other pages) */
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 18px 40px;
      background: rgba(5, 8, 21, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 999;
      transition: 0.3s;
    }
    nav.scrolled {
      background: rgba(5, 8, 21, 1);
    }
    nav .logo {
      font-size: 1.5rem;
      font-weight: 700;
    }
    nav ul {
      display: flex;
      gap: 30px;
      list-style: none;
    }
    nav ul li a {
      text-decoration: none;
      color: #e5e7eb;
      font-weight: 400;
      font-size: 0.95rem;
      transition: 0.2s;
    }
    nav ul li a:hover {
      color: #4ae3ff;
    }

    /* Layout */
    .page {
      padding: 110px 8% 40px;
    }
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 20px;
      flex-wrap: wrap;
      margin-bottom: 25px;
    }
    .page-header h1 {
      font-size: 2.4rem;
    }
    .page-header p {
      opacity: 0.8;
      max-width: 640px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .chip {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.12);
      border: 1px solid rgba(56, 189, 248, 0.7);
      color: #bae6fd;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 24px;
      margin-bottom: 24px;
    }

    .grid-2-equal {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 24px;
    }

    .card {
      background: radial-gradient(circle at top left, #1f2937, #030712);
      border-radius: 16px;
      padding: 20px 22px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.45);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 12px;
    }
    .card-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .card-title i {
      font-size: 26px;
    }
    .badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .kpi-value {
      font-size: 2rem;
      font-weight: 700;
    }
    .kpi-label {
      font-size: 0.9rem;
      opacity: 0.85;
    }

    .secondary {
      font-size: 0.95rem;
      opacity: 0.86;
    }

    .note {
      font-size: 0.8rem;
      opacity: 0.7;
      margin-top: 8px;
    }

    .chart-container {
      width: 100%;
      height: 260px;
    }
    .chart-container-short {
      width: 100%;
      height: 220px;
    }

    /* City map silhouette heatmap */
    .city-map-wrapper {
      position: relative;
      height: 260px;
      border-radius: 14px;
      background: radial-gradient(circle at top, #111827, #020617);
      overflow: hidden;
      border: 1px solid rgba(75, 85, 99, 0.8);
    }
    .city-map-bg {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(15,23,42,1), rgba(30,64,175,0.6));
      opacity: 0.45;
    }
    .city-map-grid {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      padding: 18px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-auto-rows: 1fr;
      gap: 10px;
    }
    .zone-tile {
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      padding: 8px 10px;
      font-size: 0.78rem;
      color: #e5e7eb;
      position: relative;
    }
    .zone-name {
      font-weight: 600;
      margin-bottom: 3px;
    }
    .zone-score {
      font-size: 0.75rem;
      opacity: 0.85;
    }
    .zone-good {
      background: linear-gradient(135deg, rgba(22,163,74,0.8), rgba(34,197,94,0.4));
    }
    .zone-medium {
      background: linear-gradient(135deg, rgba(234,179,8,0.85), rgba(249,115,22,0.5));
    }
    .zone-poor {
      background: linear-gradient(135deg, rgba(185,28,28,0.9), rgba(239,68,68,0.6));
    }

    .legend-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      font-size: 0.78rem;
      opacity: 0.85;
      flex-wrap: wrap;
    }
    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      margin-right: 5px;
    }

    .section-title {
      font-size: 1.2rem;
      margin-bottom: 8px;
    }

    .rec-group-title {
      font-weight: 600;
      margin-top: 6px;
      margin-bottom: 3px;
    }
    .rec-list {
      margin-left: 18px;
      font-size: 0.9rem;
    }
    .rec-list li + li {
      margin-top: 3px;
    }

    .summary-card {
      margin-top: 10px;
      font-size: 0.92rem;
      opacity: 0.9;
    }

    @media (max-width: 900px) {
      .page {
        padding: 90px 16px 30px;
      }
      .page-header h1 {
        font-size: 2rem;
      }
      nav {
        padding: 14px 18px;
      }
      nav ul {
        gap: 14px;
        font-size: 0.85rem;
      }
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav id="navbar">
    <div class="logo">SmartWaste</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="overview.html">System Overview</a></li>
      <li><a href="live.html">Live Dashboard</a></li>
      <li><a href="routes.html">Smart Routes</a></li>
      <li><a href="food.html">Food → Energy</a></li>
      <li><a href="sustainability.html">Sustainability</a></li>
      <li><a href="sorting.html">AI Sorting</a></li>
      <li><a href="contact.html">Analytics</a></li>
    </ul>
  </nav>

  <main class="page">
    <!-- Header -->
    <header class="page-header">
      <div>
        <h1>Analytics & AI Recommendations</h1>
        <p>
          This page simulates how a full SmartWaste deployment would analyse data from hundreds of bins,
          trucks and sorting lines, and how an AI assistant could recommend improvements from collection
          to Food → Energy and recycling.
        </p>
        <div class="chip-row">
          <div class="chip">City-wide overview</div>
          <div class="chip">Simulated charts</div>
          <div class="chip">AI-style recommendations</div>
        </div>
      </div>
    </header>

    <!-- KPI cards -->
    <section class="grid-3">
      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-recycle"></i>
            <div>Recycling Recovery Rate</div>
          </div>
          <span class="badge">Scenario</span>
        </div>
        <div class="kpi-value">42%</div>
        <div class="kpi-label">Of total waste mass recovered as recyclables.</div>
      </article>

      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-chart-bar"></i>
            <div>Total Waste / Day</div>
          </div>
          <span class="badge">Demo city</span>
        </div>
        <div class="kpi-value">18.5 t</div>
        <div class="kpi-label">Average daily collected across all zones.</div>
      </article>

      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-warning-circle"></i>
            <div>Contamination Rate</div>
          </div>
          <span class="badge">Mixed stream</span>
        </div>
        <div class="kpi-value">18%</div>
        <div class="kpi-label">Items in the wrong stream (e.g. plastic in general).</div>
      </article>
    </section>

    <!-- Row: Waste mix pie + daily trend -->
    <section class="grid-2">
      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-pie-chart"></i>
            <div>Waste Composition</div>
          </div>
          <span class="badge">Chart 1 of 5</span>
        </div>
        <p class="secondary">
          Simulated composition of the city’s mixed waste stream over one month. Food waste is separated as
          much as possible using the dedicated food bin, but some still appears in general waste.
        </p>
        <div id="chart-waste-mix" class="chart-container"></div>
        <p class="note">
          Values are illustrative for the prototype: organic, recyclables (paper, plastics, metals, glass) and residuals.
        </p>
      </article>

      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-trend-up"></i>
            <div>Daily Collected Waste</div>
          </div>
          <span class="badge">Chart 2 of 5</span>
        </div>
        <p class="secondary">
          Demo trend for 30 days: total collected waste plus the food fraction that goes to the Food → Energy line.
        </p>
        <div id="chart-daily-trend" class="chart-container"></div>
      </article>
    </section>

    <!-- Row: Before vs After + City map silhouette heatmap -->
    <section class="grid-2">
      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-arrows-left-right"></i>
            <div>Before vs After SmartWaste</div>
          </div>
          <span class="badge">Chart 3 of 5</span>
        </div>
        <p class="secondary">
          Conceptual comparison between a traditional fixed-schedule system and a SmartWaste deployment in one district.
        </p>
        <div id="chart-before-after" class="chart-container-short"></div>
        <p class="note">
          Metrics shown: truck kilometres, overflow incidents, and sorting accuracy. All numbers are simulated for
          explanation purposes.
        </p>
      </article>

      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-map-trifold"></i>
            <div>City Zone Sorting Quality</div>
          </div>
          <span class="badge">Chart 4 of 5</span>
        </div>
        <p class="secondary">
          Simplified “city map” with colour-coded zones based on how well residents sort their waste.
        </p>

        <div class="city-map-wrapper">
          <div class="city-map-bg"></div>
          <div class="city-map-grid">
            <div class="zone-tile zone-good">
              <div class="zone-name">Zone A</div>
              <div class="zone-score">Sorting score: 88%</div>
            </div>
            <div class="zone-tile zone-medium">
              <div class="zone-name">Zone B</div>
              <div class="zone-score">Sorting score: 71%</div>
            </div>
            <div class="zone-tile zone-poor">
              <div class="zone-name">Zone C</div>
              <div class="zone-score">Sorting score: 54%</div>
            </div>
            <div class="zone-tile zone-good">
              <div class="zone-name">Zone D</div>
              <div class="zone-score">Sorting score: 90%</div>
            </div>
            <div class="zone-tile zone-medium">
              <div class="zone-name">Zone E</div>
              <div class="zone-score">Sorting score: 76%</div>
            </div>
            <div class="zone-tile zone-poor">
              <div class="zone-name">Zone F</div>
              <div class="zone-score">Sorting score: 49%</div>
            </div>
            <div class="zone-tile zone-medium">
              <div class="zone-name">Zone G</div>
              <div class="zone-score">Sorting score: 69%</div>
            </div>
            <div class="zone-tile zone-good">
              <div class="zone-name">Zone H</div>
              <div class="zone-score">Sorting score: 84%</div>
            </div>
          </div>
        </div>

        <div class="legend-row">
          <span><span class="legend-dot" style="background: #22c55e;"></span> Good (&gt;80%)</span>
          <span><span class="legend-dot" style="background: #eab308;"></span> Medium (60–80%)</span>
          <span><span class="legend-dot" style="background: #ef4444;"></span> Poor (&lt;60%)</span>
        </div>
      </article>
    </section>

    <!-- Row: Food vs Recyclables chart + Carbon savings -->
    <section class="grid-2-equal">
      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-bowl-food"></i>
            <div>Food vs Recyclables Over Time</div>
          </div>
          <span class="badge">Chart 5 of 5</span>
        </div>
        <p class="secondary">
          Simulated weekly totals for food waste sent to the Food → Energy line, compared with recyclables captured.
        </p>
        <div id="chart-food-recycle" class="chart-container-short"></div>
      </article>

      <article class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="ph-fill ph-tree"></i>
            <div>Carbon & Energy Simulation</div>
          </div>
          <span class="badge">Scenario</span>
        </div>
        <p class="secondary">
          Approximate yearly impact if SmartWaste is deployed in a medium-sized district:
        </p>
        <ul class="secondary">
          <li><strong>CO₂ reduction:</strong> ~120 t / year</li>
          <li><strong>Biogas energy:</strong> ~95 MWh equivalent</li>
          <li><strong>Tree-equivalent:</strong> similar to planting ~5,500 trees</li>
        </ul>
        <p class="note">
          Values are for explanation only, not from a real LCA model.
        </p>
      </article>
    </section>

    <!-- AI Recommendations (full report-style) -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">
          <i class="ph-fill ph-robot"></i>
          <div>AI-Style Recommendations (Demo)</div>
        </div>
        <span class="badge">Professional summary</span>
      </div>

      <p class="secondary">
        Based on the simulated data from bins, routes, AI sorting and the Food → Energy line, an AI assistant
        could generate a professional report similar to the following. All points below are generated for the
        project and are not based on real city data.
      </p>

      <div class="summary-card">
        <div class="section-title">1. Collection & Route Optimization</div>
        <ul class="rec-list">
          <li><span class="rec-group-title">R1.</span> Reduce collection frequency in Zones A and D from daily to every 2 days; bin fill levels rarely exceed 60% in these areas.</li>
          <li><span class="rec-group-title">R2.</span> Increase evening collection window in Zones C and F, where food waste peaks after 20:00, to reduce overnight smell and gas build-up.</li>
          <li><span class="rec-group-title">R3.</span> Merge two partially overlapping routes serving Zones B and E to remove redundant kilometres and save fuel.</li>
          <li><span class="rec-group-title">R4.</span> Introduce a “high-priority” route profile that only targets bins marked FULL or with repeated smell alarms.</li>
        </ul>
      </div>

      <div class="summary-card">
        <div class="section-title">2. Food Waste → Energy Line</div>
        <ul class="rec-list">
          <li><span class="rec-group-title">F1.</span> Increase the number of food waste bins in Zones B and G; these areas show high organic content still arriving in general waste at HQ.</li>
          <li><span class="rec-group-title">F2.</span> Calibrate collection timing so that food waste arrives more consistently during the day, improving digester loading and biogas stability.</li>
          <li><span class="rec-group-title">F3.</span> Use smell spikes in food bins as an early indicator of decomposition speed and adjust the maximum holding time before collection.</li>
          <li><span class="rec-group-title">F4.</span> Publish a simple dashboard card to the municipality summarising “Food diverted from landfill this week” to communicate impact.</li>
        </ul>
      </div>

      <div class="summary-card">
        <div class="section-title">3. AI Sorting & Contamination</div>
        <ul class="rec-list">
          <li><span class="rec-group-title">S1.</span> Zones C and F show the lowest sorting scores (&lt;60%); prioritise these for targeted awareness campaigns and better on-bin labelling.</li>
          <li><span class="rec-group-title">S2.</span> Use AI sorting statistics to generate monthly “contamination reports” for facility managers of residential towers in each zone.</li>
          <li><span class="rec-group-title">S3.</span> Tune the AI model to better distinguish contaminated paper food packaging, which currently appears as a frequent borderline class.</li>
          <li><span class="rec-group-title">S4.</span> Log each “rescued” recyclable item from the general stream as a positive indicator of AI sorting value in future cost–benefit analysis.</li>
        </ul>
      </div>

      <div class="summary-card">
        <div class="section-title">4. Policy, UX & Education</div>
        <ul class="rec-list">
          <li><span class="rec-group-title">P1.</span> Share simplified versions of these analytics with residents through a public dashboard, focusing on positive outcomes rather than penalties.</li>
          <li><span class="rec-group-title">P2.</span> Pilot a reward system for buildings that maintain high sorting scores for three consecutive months.</li>
          <li><span class="rec-group-title">P3.</span> Use overflow and smell alert history to redesign bin placement, adding or relocating bins where repeated issues are detected.</li>
          <li><span class="rec-group-title">P4.</span> Align SmartWaste metrics with the city’s sustainability KPIs (CO₂ reduction, recycling rate, landfill diversion) for easier reporting.</li>
        </ul>
      </div>
    </section>
  </main>

  <script>
    // Navbar scroll effect
    window.addEventListener("scroll", () => {
      const nav = document.getElementById("navbar");
      nav.classList.toggle("scrolled", window.scrollY > 10);
    });

    // ----- Vega-Lite charts (static demo data) -----

    // Chart 1: Waste composition pie
    const wasteMixSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {
        "values": [
          {"category": "Organic (food)", "value": 38},
          {"category": "Paper & Cardboard", "value": 17},
          {"category": "Plastics", "value": 16},
          {"category": "Metals", "value": 7},
          {"category": "Glass", "value": 6},
          {"category": "Residuals", "value": 16}
        ]
      },
      "mark": {"type": "arc", "innerRadius": 50},
      "encoding": {
        "theta": {"field": "value", "type": "quantitative"},
        "color": {"field": "category", "type": "nominal"},
        "tooltip": [
          {"field": "category", "type": "nominal", "title": "Category"},
          {"field": "value", "type": "quantitative", "title": "% of stream"}
        ]
      },
      "view": {"stroke": null}
    };
    vegaEmbed("#chart-waste-mix", wasteMixSpec, {actions: false});

    // Chart 2: Daily collected waste trend
    const dailyValues = [];
    for (let day = 1; day <= 30; day++) {
      const total = 16 + Math.sin(day / 4) * 2 + (day % 7 === 0 ? 1.5 : 0);
      const food = total * 0.35 + Math.cos(day / 5) * 0.4;
      dailyValues.push(
        {"day": day, "type": "Total", "tons": +total.toFixed(2)},
        {"day": day, "type": "Food", "tons": +food.toFixed(2)}
      );
    }
    const dailyTrendSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {"values": dailyValues},
      "mark": "line",
      "encoding": {
        "x": {"field": "day", "type": "quantitative", "title": "Day"},
        "y": {"field": "tons", "type": "quantitative", "title": "Tons collected"},
        "color": {"field": "type", "type": "nominal"},
        "tooltip": [
          {"field": "day", "type": "quantitative"},
          {"field": "type", "type": "nominal"},
          {"field": "tons", "type": "quantitative"}
        ]
      },
      "view": {"stroke": null}
    };
    vegaEmbed("#chart-daily-trend", dailyTrendSpec, {actions: false});

    // Chart 3: Before vs After SmartWaste
    const beforeAfterSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {
        "values": [
          {"metric": "Truck km / month", "system": "Traditional", "value": 100},
          {"metric": "Truck km / month", "system": "SmartWaste", "value": 68},
          {"metric": "Overflow incidents", "system": "Traditional", "value": 24},
          {"metric": "Overflow incidents", "system": "SmartWaste", "value": 7},
          {"metric": "Sorting accuracy", "system": "Traditional", "value": 62},
          {"metric": "Sorting accuracy", "system": "SmartWaste", "value": 83}
        ]
      },
      "mark": "bar",
      "encoding": {
        "x": {"field": "metric", "type": "nominal", "title": null},
        "y": {"field": "value", "type": "quantitative", "title": "Relative value"},
        "color": {"field": "system", "type": "nominal", "title": "System"},
        "column": {"field": "metric", "type": "nominal", "spacing": 10},
        "tooltip": [
          {"field": "metric", "type": "nominal"},
          {"field": "system", "type": "nominal"},
          {"field": "value", "type": "quantitative"}
        ]
      },
      "resolve": {"scale": {"y": "independent"}},
      "view": {"stroke": null},
      "config": {
        "facet": {"spacing": 10}
      }
    };
    vegaEmbed("#chart-before-after", beforeAfterSpec, {actions: false});

    // Chart 5: Food vs Recyclables per week
    const foodRecValues = [
      {"week": "Week 1", "type": "Food → Energy", "tons": 3.1},
      {"week": "Week 1", "type": "Recyclables", "tons": 4.3},
      {"week": "Week 2", "type": "Food → Energy", "tons": 3.4},
      {"week": "Week 2", "type": "Recyclables", "tons": 4.1},
      {"week": "Week 3", "type": "Food → Energy", "tons": 3.7},
      {"week": "Week 3", "type": "Recyclables", "tons": 4.6},
      {"week": "Week 4", "type": "Food → Energy", "tons": 3.9},
      {"week": "Week 4", "type": "Recyclables", "tons": 4.8}
    ];
    const foodRecycleSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": {"values": foodRecValues},
      "mark": "bar",
      "encoding": {
        "x": {"field": "week", "type": "nominal", "title": null},
        "y": {"field": "tons", "type": "quantitative", "title": "Tons per week"},
        "color": {"field": "type", "type": "nominal", "title": null},
        "tooltip": [
          {"field": "week", "type": "nominal"},
          {"field": "type", "type": "nominal"},
          {"field": "tons", "type": "quantitative"}
        ]
      },
      "view": {"stroke": null}
    };
    vegaEmbed("#chart-food-recycle", foodRecycleSpec, {actions: false});
  </script>
</body>
</html>
